<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Perfil - Ludwing Díaz</title>
    <link rel="stylesheet" href="/projects/vlog/css/tutoriales.css">
    <link rel="shortcut icon" type="image/png" href="/assets/EmoteBulldog 28x28.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="/css/dashboard.css"> 
</head>
<body>
    <header>
        <%- include('partials/header') %> 
    </header>

    <main class="container profile-dashboard-layout">
        <div id="messageBox" class="message-box" style="display: none;"></div>

        <aside class="profile-sidebar">
            <div class="profile-avatar-display">
                <img src="https://placehold.co/100x100/cccccc/333333?text=Avatar" alt="Avatar de Usuario" class="profile-avatar-large">
                <h3 id="usernameDisplaySidebar">Cargando...</h3>
                <p class="profile-email-sidebar" id="userEmailDisplaySidebar">Cargando...</p>
            </div>
            <nav class="profile-sub-nav">
                <a href="#" class="profile-nav-item" id="visionGeneralLink">
                    <i class="icon-overview"></i> Visión General
                </a>
                <a href="#" class="profile-nav-item" id="editProfileLink">
                    <i class="icon-edit"></i> Editar Perfil
                </a>
                <a href="#" class="profile-nav-item" id="securityLink">
                    <i class="icon-security"></i> Seguridad
                </a>
                <a href="#" class="profile-nav-item" id="misComentariosLink">
                    <i class="icon-comments"></i> Mis Comentarios
                </a>
            </nav>
        </aside>
     
        <section class="profile-main-content">
            <div id="profile-overview-section" class="content-card content-section">
                <h1>Bienvenido a tu Perfil, <span id="usernameDisplayMain">Cargando...</span>!</h1>
                <div class="profile-stats-grid">
                    <div class="stat-card">
                        <h4>Comentarios Publicados</h4>
                        <p class="stat-value">--</p> </div>
                    <div class="stat-card">
                        <h4>Última Actividad</h4>
                        <p class="stat-value">--</p> </div>
                    <div class="stat-card">
                        <h4>Artículos Vistos</h4>
                        <p class="stat-value">--</p> </div>
                </div>

                <a href="#" id="editProfileMainBtn" class="submit-button edit-profile-main-btn">Editar Perfil</a>
            
                <div class="card mt-4">
                    <h3>Últimas 10 Entradas/Comentarios</h3>
                    <div id="commentsList">
                        <p>Cargando tus últimas entradas...</p>
                    </div>
                </div>
            </div>
            
            <div id="edit-profile-section" class="content-card content-section" style="display: none;">
                <h2>Editar Perfil</h2>
                <div class="edit-profile-container">
                    <form id="editProfileForm">
                        <div class="form-group">
                            <label for="editUsername">Nuevo Nombre de Usuario:</label>
                            <input type="text" id="editUsername" class="form-control" required minlength="3" aria-label="Nuevo nombre de usuario">
                        </div>
                        <div class="form-group">
                            <label for="currentPassword">Contraseña Actual:</label>
                            <input type="password" id="currentPassword" class="form-control" required aria-label="Contraseña actual">
                            <small class="form-text text-muted">Necesario para confirmar cambios.</small>
                        </div>
                        <div class="form-group">
                            <label for="newPassword">Nueva Contraseña (opcional):</label>
                            <input type="password" id="newPassword" class="form-control" aria-label="Nueva contraseña">
                            <small class="form-text text-muted">Mínimo 8 caracteres, incluyendo mayúsculas, minúsculas y números.</small>
                        </div>
                        <div class="form-group">
                            <label for="confirmNewPassword">Confirmar Nueva Contraseña:</label>
                            <input type="password" id="confirmNewPassword" class="form-control" aria-label="Confirmar nueva contraseña">
                        </div>
                        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                        <p id="editProfileMessage" class="message-box mt-3" style="display: none;"></p>
                    </form>
                </div>
            </div>

            <div id="comments-section" class="content-card content-section" style="display: none;">
                <h2>Todos Mis Comentarios</h2>
                <div id="commentsListAll"> <p>Cargando todos tus comentarios...</p>
                </div>
            </div>

            <div id="protected-data-section" class="content-card content-section" style="display: none;">
                <h2>Mis Datos Protegidos</h2>
                <button id="fetchProtectedData" class="submit-button">Cargar mis datos (Protegido)</button>
                <p id="protectedMessage" style="margin-top: 15px;"></p>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Ludwing Díaz. Todos los derechos reservados.</p>
    </footer>

    <script src="/projects/vlog/js/auth.js" defer></script> 
    <script src="/projects/vlog/js/theme-switcher.js"></script>
    <script src="/projects/vlog/js/diario.js" defer></script> 
    </body>
</html>
